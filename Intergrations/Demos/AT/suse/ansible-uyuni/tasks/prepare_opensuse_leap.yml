---
- name: Add release GPG keys
  rpm_key:
    key: "{{ item }}"
  loop: "{{ uyuni_repo_gpg }}"
  become: true
  when: uyuni_release is defined

- name: Add latest GPG keys
  rpm_key:
    key: "{{ item }}"
  loop: "{{ uyuni_gpg }}"
  become: true
  when: uyuni_release is undefined

- name: Add release Uyuni repositories
  zypper_repository:
    repo: "{{ item.url }}"
    name: "{{ item.name }}"
  loop: "{{ uyuni_repo_release }}"
  become: true
  when:
    - uyuni_use_repo | bool
    - uyuni_release is defined

- name: Add latest Uyuni repositories
  zypper_repository:
    repo: "{{ item.url }}"
    name: "{{ item.name }}"
  loop: "{{ uyuni_repos }}"
  become: true
  when:
    - uyuni_use_repo | bool
    - uyuni_release is undefined
